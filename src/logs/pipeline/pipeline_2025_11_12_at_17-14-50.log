[2025-11-12 17:23:53] [INFO] ðŸ§  Generating script for topic='create a circle', class='10'
[2025-11-12 17:24:03] [INFO] ðŸš€ Sending generated script to /generate-files-api and /Generator ...
[2025-11-12 17:24:29] [INFO] ðŸŽ¬ Generated Manim Code Successfully
[2025-11-12 17:24:30] [INFO] ðŸŸ¢ [generate-files-api] New request received
[2025-11-12 17:24:30] [INFO] ðŸ“ Created folder: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e
[2025-11-12 17:24:30] [INFO] âœ… JSON saved successfully at C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\input_data.json
[2025-11-12 17:24:30] [INFO] ðŸ§© Starting file preparation process via prepare_files()
[2025-11-12 17:24:30] [INFO] ðŸ“ Generating Python and TXT files from JSON: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\input_data.json
[2025-11-12 17:24:30] [INFO] ðŸ“‚ Using existing transaction folder for script sequences: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences
[2025-11-12 17:24:30] [INFO] ðŸ“ Created script sequence folder: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq1
[2025-11-12 17:24:30] [INFO] âœ… Created PY file: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq1\script_seq1.py
[2025-11-12 17:24:30] [INFO] âœ… Created TXT file: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq1\script_seq1.txt
[2025-11-12 17:24:30] [INFO] ðŸ“ Created script sequence folder: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq2
[2025-11-12 17:24:30] [INFO] âœ… Created PY file: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq2\script_seq2.py
[2025-11-12 17:24:30] [INFO] âœ… Created TXT file: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq2\script_seq2.txt
[2025-11-12 17:24:30] [INFO] ðŸŽ¯ Total Words: 578 | Approx. Total GPT Tokens: 769
[2025-11-12 17:24:30] [INFO] ðŸŽ‰ All files generated inside: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences
[2025-11-12 17:24:30] [INFO] âœ… File preparation completed. Output: {'py_files': ['C:\\ArkMalay\\Framework\\Video_data\\20251112_172430_7b4e784e\\script_sequences\\script_seq1\\script_seq1.py', 'C:\\ArkMalay\\Framework\\Video_data\\20251112_172430_7b4e784e\\script_sequences\\script_seq2\\script_seq2.py'], 'txt_files': ['C:\\ArkMalay\\Framework\\Video_data\\20251112_172430_7b4e784e\\script_sequences\\script_seq1\\script_seq1.txt', 'C:\\ArkMalay\\Framework\\Video_data\\20251112_172430_7b4e784e\\script_sequences\\script_seq2\\script_seq2.txt']}
[2025-11-12 17:24:30] [INFO] ðŸŽ¯ Transaction 7b4e784e completed successfully. Folder: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e
[2025-11-12 17:24:30] [INFO] ðŸ” TRANSACTION_FOLDER currently: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e
[2025-11-12 17:24:30] [INFO] ðŸŸ¢ Using TRANSACTION_FOLDER for writing scripts: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences
[2025-11-12 17:24:30] [INFO] âœ… Manim script written: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq1\script_seq1.py
[2025-11-12 17:24:30] [INFO] âœ… Manim script written: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences\script_seq2\script_seq2.py
[2025-11-12 17:24:30] [INFO] ðŸŽ¥ Triggering video generation for folder: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences
[2025-11-12 17:24:31] [INFO] ðŸš€ Received video generation request.
[2025-11-12 17:24:31] [INFO] ðŸ“‚ Using provided input path: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences
[2025-11-12 17:24:31] [INFO] ðŸ§© Found 2 .py files and 2 .txt files under C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\script_sequences
[2025-11-12 17:24:31] [INFO] ðŸŽ¬ Starting video + audio processing pipeline...
[2025-11-12 17:24:31] [INFO] ðŸŽ¬ Video callable prepared for: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e
[2025-11-12 17:24:31] [INFO] ðŸŽ¬ Running Manim on C:/ArkMalay/Framework/Video_data/20251112_172430_7b4e784e/script_sequences/script_seq1/script_seq1.py ...
[2025-11-12 17:24:31] [INFO] ðŸ§¹ Cleaned old media folder: C:\ArkMalay\Framework\tutor\src\media\videos\script_sequences\script_seq1
[2025-11-12 17:24:45] [INFO] ðŸŽžï¸ Detected Scene class: ExpandingCircle
[2025-11-12 17:24:45] [INFO] âœ… Found video: C:\ArkMalay\Framework\tutor\src\media\videos\script_sequences\script_seq1\videos\script_seq1\480p15\ExpandingCircle.mp4
[2025-11-12 17:24:45] [INFO] ðŸŽ¬ Running Manim on C:/ArkMalay/Framework/Video_data/20251112_172430_7b4e784e/script_sequences/script_seq2/script_seq2.py ...
[2025-11-12 17:24:45] [INFO] ðŸ§¹ Cleaned old media folder: C:\ArkMalay\Framework\tutor\src\media\videos\script_sequences\script_seq2
[2025-11-12 17:25:06] [INFO] ðŸŽžï¸ Detected Scene class: MovingCircle
[2025-11-12 17:25:06] [INFO] âœ… Found video: C:\ArkMalay\Framework\tutor\src\media\videos\script_sequences\script_seq2\videos\script_seq2\480p15\MovingCircle.mp4
[2025-11-12 17:25:06] [INFO] âœ… Total words: 46 | Approx. GPT tokens: 60 | Total videos collected: 2
[2025-11-12 17:26:06] [INFO] Entering save_all_script_media.
[2025-11-12 17:26:06] [INFO] Video Path:[WindowsPath('C:/ArkMalay/Framework/tutor/output/Videos')]
[2025-11-12 17:26:06] [INFO] Audio Path:[WindowsPath('C:/ArkMalay/Framework/tutor/output/Audios')]
[2025-11-12 17:26:06] [INFO] ðŸŽ¬ Video saved at: C:\ArkMalay\Framework\tutor\output\Videos\20251112_172430_7b4e784e_script_seq1.mp4
[2025-11-12 17:26:06] [INFO] ðŸŽµ Audio saved at: C:\ArkMalay\Framework\tutor\output\Audios\20251112_172430_7b4e784e_script_seq1.mp3
[2025-11-12 17:26:06] [INFO] ðŸŽ¬ Video saved at: C:\ArkMalay\Framework\tutor\output\Videos\20251112_172430_7b4e784e_script_seq2.mp4
[2025-11-12 17:26:06] [INFO] ðŸŽµ Audio saved at: C:\ArkMalay\Framework\tutor\output\Audios\20251112_172430_7b4e784e_script_seq2.mp3
[2025-11-12 17:26:06] [INFO] ðŸš€ [TABLE_GEN] Starting table generation and DB insertion process...
[2025-11-12 17:26:06] [INFO] ðŸ“‚ [TABLE_GEN] Topic: 20251112_172430_7b4e784e
[2025-11-12 17:26:06] [INFO] ðŸ“ [TABLE_GEN] Found 2 scripts, 2 txts, 3 videos, 3 audios
[2025-11-12 17:26:06] [INFO] ðŸ§© [TABLE_GEN] Connecting to PostgreSQL database 'a_v_data'...
[2025-11-12 17:26:06] [INFO] âœ… [TABLE_GEN] PostgreSQL connection established successfully.
[2025-11-12 17:26:06] [INFO] ðŸ›  [TABLE_GEN] Ensuring table 'videos' exists...
[2025-11-12 17:26:06] [INFO] âœ… [TABLE_GEN] Table check/creation complete.
[2025-11-12 17:26:06] [INFO] ðŸ“ [TABLE_GEN] Preparing record 1/2: script_seq1
[2025-11-12 17:26:06] [INFO] âœ… [TABLE_GEN] Inserted record into DB: 20251112_172430_7b4e784e_20251112_7S7P2T
[2025-11-12 17:26:06] [INFO] ðŸ“ [TABLE_GEN] Preparing record 2/2: script_seq2
[2025-11-12 17:26:06] [INFO] âœ… [TABLE_GEN] Inserted record into DB: 20251112_172430_7b4e784e_20251112_D73SCG
[2025-11-12 17:26:06] [INFO] ðŸ’¾ [TABLE_GEN] All records committed successfully to PostgreSQL.
[2025-11-12 17:26:06] [INFO] ðŸ [TABLE_GEN] Table generation process completed.
[2025-11-12 17:26:06] [INFO] ðŸŽžï¸ [MERGE] Starting final video/audio merge process...
[2025-11-12 17:26:06] [INFO] ðŸŽ¬ [MERGE] Video clips: 2, Audio clips: 2
[2025-11-12 17:26:06] [INFO] ðŸŽžï¸ Starting merge_all_videos_with_audio
[2025-11-12 17:26:06] [INFO] ðŸŽ¬ Total video segments: 2, Total audio segments: 2
[2025-11-12 17:26:06] [INFO] ðŸ“ Total video bytes: 30,554, Total audio bytes: 3,777,688
[2025-11-12 17:26:06] [INFO] ðŸŽžï¸ Merging video/audio pair 1
[2025-11-12 17:26:06] [INFO] ðŸ“¦ Pair 1 -> Video bytes: 13,813, Audio bytes: 1,767,644
[2025-11-12 17:26:06] [INFO] ðŸŽžï¸ [MERGE] Entering merge_video_with_audio
[2025-11-12 17:26:06] [INFO] ðŸ“¦ [MERGE] Starting merge for 1 pair(s).
[2025-11-12 17:26:06] [INFO] ðŸŽ¬ [PAIR 1] Preparing temporary files for merge. Video size = 13,813 bytes, Audio size = 1,767,644 bytes.
[2025-11-12 17:26:06] [INFO] ðŸ”§ [PAIR 1] Running ffmpeg to merge video/audio:
  â†’ Video file: C:\Users\malay\AppData\Local\Temp\tmp9bzbvoum.mp4
  â†’ Audio file: C:\Users\malay\AppData\Local\Temp\tmpms4o04ak.mp3
  â†’ Output file: C:\Users\malay\AppData\Local\Temp\tmpfducgx14.mp4
[2025-11-12 17:26:08] [INFO] âœ… [PAIR 1] Merge successful. Output size = 40,673 bytes.
[2025-11-12 17:26:08] [INFO] ðŸŽ¬ [MERGE] Only one merged video, returning directly.
[2025-11-12 17:26:08] [INFO] ðŸŽžï¸ Merging video/audio pair 2
[2025-11-12 17:26:08] [INFO] ðŸ“¦ Pair 2 -> Video bytes: 16,741, Audio bytes: 2,010,044
[2025-11-12 17:26:08] [INFO] ðŸŽžï¸ [MERGE] Entering merge_video_with_audio
[2025-11-12 17:26:08] [INFO] ðŸ“¦ [MERGE] Starting merge for 1 pair(s).
[2025-11-12 17:26:08] [INFO] ðŸŽ¬ [PAIR 1] Preparing temporary files for merge. Video size = 16,741 bytes, Audio size = 2,010,044 bytes.
[2025-11-12 17:26:08] [INFO] ðŸ”§ [PAIR 1] Running ffmpeg to merge video/audio:
  â†’ Video file: C:\Users\malay\AppData\Local\Temp\tmpprjfspvl.mp4
  â†’ Audio file: C:\Users\malay\AppData\Local\Temp\tmpsapykr6_.mp3
  â†’ Output file: C:\Users\malay\AppData\Local\Temp\tmpsu0tf88a.mp4
[2025-11-12 17:26:08] [INFO] âœ… [PAIR 1] Merge successful. Output size = 60,545 bytes.
[2025-11-12 17:26:08] [INFO] ðŸŽ¬ [MERGE] Only one merged video, returning directly.
[2025-11-12 17:26:08] [INFO] ðŸŽ¬ Concatenating 2 merged videos...
[2025-11-12 17:26:08] [INFO] Entering concatenate_videos
[2025-11-12 17:26:09] [INFO] ðŸŽ¬ Final concatenated MP4 video returned as bytes
[2025-11-12 17:26:09] [INFO] âœ… [MERGE] Merge completed successfully in 3.14s.
[2025-11-12 17:26:09] [INFO] ðŸ’¾ [MERGE] Preparing to save final video as 'final_video_20251112_172609.mp4' (mode: local).
[2025-11-12 17:26:09] [INFO] Entering save_final_video
[2025-11-12 17:26:09] [INFO] âœ… Final video saved locally at: C:\ArkMalay\Framework\tutor\src\output\final_video_20251112_172609.mp4
[2025-11-12 17:26:09] [INFO] ðŸŽ‰ [MERGE] Final video saved successfully â†’ C:\ArkMalay\Framework\tutor\src\output\final_video_20251112_172609.mp4
[2025-11-12 17:26:09] [INFO] ðŸš€ Starting Drive upload process
[2025-11-12 17:26:09] [INFO] ðŸ“‚ Using Settings.TRANSACTION_FOLDER: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e
[2025-11-12 17:26:09] [INFO] ðŸ“¦ Final video copied to transaction folder: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e\final_video_20251112_172609.mp4
[2025-11-12 17:26:09] [INFO] ðŸ” upload_folder_to_drive called with: C:\ArkMalay\Framework\Video_data\20251112_172430_7b4e784e
[2025-11-12 17:26:09] [INFO] âœ… Drive auth successful (mode=service)
[2025-11-12 17:26:09] [INFO] ðŸ“ Service-mode: uploading '20251112_172430_7b4e784e' under Drive parent ID 1fSIa3LHaUZ6ElWywNuyHRnyj1ohr_gjj
[2025-11-12 17:26:12] [INFO] ðŸ“ Created Drive subfolder '20251112_172430_7b4e784e' under parent 1fSIa3LHaUZ6ElWywNuyHRnyj1ohr_gjj -> id=12DNS-ZEaRU7s1Z8GTiPTxzezqOBz3rJc
[2025-11-12 17:26:13] [INFO] ðŸ“ Created Drive subfolder 'script_sequences' under parent 12DNS-ZEaRU7s1Z8GTiPTxzezqOBz3rJc -> id=1L4NoVrL9BxEeOrt4rBfaZ0hVGNi4ItV1
[2025-11-12 17:26:16] [INFO] âœ… Uploaded (service): final_video_20251112_172609.mp4 â†’ https://drive.google.com/file/d/14VvBaReRn-w_jRw5AwuBJv3XW2rV3sW2/view?usp=drivesdk
[2025-11-12 17:26:18] [INFO] âœ… Uploaded (service): input_data.json â†’ https://drive.google.com/file/d/1M4wFzxIogFaI3NDn_W_hRnKFMWMVDMWa/view?usp=drivesdk
[2025-11-12 17:26:19] [INFO] ðŸ“ Created Drive subfolder 'script_seq1' under parent 1L4NoVrL9BxEeOrt4rBfaZ0hVGNi4ItV1 -> id=1RvjRFstDRSxkG-Ycdf8K49VTVJQahCEI
[2025-11-12 17:26:20] [INFO] ðŸ“ Created Drive subfolder 'script_seq2' under parent 1L4NoVrL9BxEeOrt4rBfaZ0hVGNi4ItV1 -> id=1HjGJEonNbr86qvMUHbPD2rZbtp3khxnB
[2025-11-12 17:26:24] [INFO] âœ… Uploaded (service): script_seq1.py â†’ https://drive.google.com/file/d/11vZtsI_1TmJQkzQG2a_vM2NOwF4HBkJ7/view?usp=drivesdk
[2025-11-12 17:26:26] [INFO] âœ… Uploaded (service): script_seq1.txt â†’ https://drive.google.com/file/d/1XPT804gR2Gc94z5xCJTQzF9GO1wXrHJx/view?usp=drivesdk
[2025-11-12 17:26:28] [INFO] âœ… Uploaded (service): script_seq2.py â†’ https://drive.google.com/file/d/10jIXz_ZAF9qmb8PzvwgvtxSZHUwxlzzL/view?usp=drivesdk
[2025-11-12 17:26:31] [INFO] âœ… Uploaded (service): script_seq2.txt â†’ https://drive.google.com/file/d/1neGaS6afzbsqO4PpHJea2017mbKM_a7S/view?usp=drivesdk
[2025-11-12 17:26:31] [INFO] ðŸŽ‰ Service-mode upload complete. Session folder link: https://drive.google.com/drive/folders/12DNS-ZEaRU7s1Z8GTiPTxzezqOBz3rJc
[2025-11-12 17:26:31] [INFO] âœ… Folder (with final video) successfully uploaded to Google Drive.
[2025-11-12 17:26:31] [INFO] âœ… Pipeline completed successfully. Final video saved at: C:\ArkMalay\Framework\tutor\src\output\final_video_20251112_172609.mp4
